"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq";
exports.ids = ["vendor-chunks/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/stores/doc/in_memory.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/stores/doc/in_memory.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InMemoryDocstore: () => (/* reexport safe */ langchain_stores_doc_in_memory__WEBPACK_IMPORTED_MODULE_0__.InMemoryDocstore),\n/* harmony export */   SynchronousInMemoryDocstore: () => (/* reexport safe */ langchain_stores_doc_in_memory__WEBPACK_IMPORTED_MODULE_0__.SynchronousInMemoryDocstore)\n/* harmony export */ });\n/* harmony import */ var langchain_stores_doc_in_memory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langchain/stores/doc/in_memory */ \"(rsc)/./node_modules/.pnpm/langchain@0.2.16_@aws-sdk+client-s3@3.631.0_@aws-sdk+credential-provider-node@3.631.0_@aws-sd_uhe6eexvv2imtoiz265ybd7qcm/node_modules/langchain/stores/doc/in_memory.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitjb21tdW5pdHlAMC4yLjI3X0Bhd3MtY3J5cHRvK3NoYTI1Ni1qc0A1LjIuMF9AYXdzLXNkaytjbGllbnQtczNAMy42MzEuMF9AYXdzLXNkaytjX3R1cGUycTRuNG50M3pncW50bGo0NWNyaGxxL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvbW11bml0eS9kaXN0L3N0b3Jlcy9kb2MvaW5fbWVtb3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXJibGlzbS9uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitjb21tdW5pdHlAMC4yLjI3X0Bhd3MtY3J5cHRvK3NoYTI1Ni1qc0A1LjIuMF9AYXdzLXNkaytjbGllbnQtczNAMy42MzEuMF9AYXdzLXNkaytjX3R1cGUycTRuNG50M3pncW50bGo0NWNyaGxxL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvbW11bml0eS9kaXN0L3N0b3Jlcy9kb2MvaW5fbWVtb3J5LmpzP2I4NDciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcImxhbmdjaGFpbi9zdG9yZXMvZG9jL2luX21lbW9yeVwiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/stores/doc/in_memory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/vectorstores/hnswlib.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/vectorstores/hnswlib.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HNSWLib: () => (/* binding */ HNSWLib)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/vectorstores */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.2.24_langchain@0.2.16_@aws-sdk+client-s3@3.631.0_@aws-sdk+credential-provid_jdkqunlxzs4ayndfejh3gvjdqe/node_modules/@langchain/core/vectorstores.js\");\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.2.24_langchain@0.2.16_@aws-sdk+client-s3@3.631.0_@aws-sdk+credential-provid_jdkqunlxzs4ayndfejh3gvjdqe/node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _stores_doc_in_memory_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stores/doc/in_memory.js */ \"(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/stores/doc/in_memory.js\");\n\n\n\n/**\n * Class that implements a vector store using Hierarchical Navigable Small\n * World (HNSW) graphs. It extends the SaveableVectorStore class and\n * provides methods for adding documents and vectors, performing\n * similarity searches, and saving and loading the vector store.\n */\nclass HNSWLib extends _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_0__.SaveableVectorStore {\n    _vectorstoreType() {\n        return \"hnswlib\";\n    }\n    constructor(embeddings, args) {\n        super(embeddings, args);\n        Object.defineProperty(this, \"_index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"docstore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"args\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._index = args.index;\n        this.args = args;\n        this.embeddings = embeddings;\n        this.docstore = args?.docstore ?? new _stores_doc_in_memory_js__WEBPACK_IMPORTED_MODULE_2__.SynchronousInMemoryDocstore();\n    }\n    /**\n     * Method to add documents to the vector store. It first converts the\n     * documents to vectors using the embeddings, then adds the vectors to the\n     * vector store.\n     * @param documents The documents to be added to the vector store.\n     * @returns A Promise that resolves when the documents have been added.\n     */\n    async addDocuments(documents) {\n        const texts = documents.map(({ pageContent }) => pageContent);\n        return this.addVectors(await this.embeddings.embedDocuments(texts), documents);\n    }\n    static async getHierarchicalNSW(args) {\n        const { HierarchicalNSW } = await HNSWLib.imports();\n        if (!args.space) {\n            throw new Error(\"hnswlib-node requires a space argument\");\n        }\n        if (args.numDimensions === undefined) {\n            throw new Error(\"hnswlib-node requires a numDimensions argument\");\n        }\n        return new HierarchicalNSW(args.space, args.numDimensions);\n    }\n    async initIndex(vectors) {\n        if (!this._index) {\n            if (this.args.numDimensions === undefined) {\n                this.args.numDimensions = vectors[0].length;\n            }\n            this.index = await HNSWLib.getHierarchicalNSW(this.args);\n        }\n        if (!this.index.getCurrentCount()) {\n            this.index.initIndex(vectors.length);\n        }\n    }\n    get index() {\n        if (!this._index) {\n            throw new Error(\"Vector store not initialised yet. Try calling `addTexts` first.\");\n        }\n        return this._index;\n    }\n    set index(index) {\n        this._index = index;\n    }\n    /**\n     * Method to add vectors to the vector store. It first initializes the\n     * index if it hasn't been initialized yet, then adds the vectors to the\n     * index and the documents to the document store.\n     * @param vectors The vectors to be added to the vector store.\n     * @param documents The documents corresponding to the vectors.\n     * @returns A Promise that resolves when the vectors and documents have been added.\n     */\n    async addVectors(vectors, documents) {\n        if (vectors.length === 0) {\n            return;\n        }\n        await this.initIndex(vectors);\n        // TODO here we could optionally normalise the vectors to unit length\n        // so that dot product is equivalent to cosine similarity, like this\n        // https://github.com/nmslib/hnswlib/issues/384#issuecomment-1155737730\n        // While we only support OpenAI embeddings this isn't necessary\n        if (vectors.length !== documents.length) {\n            throw new Error(`Vectors and metadatas must have the same length`);\n        }\n        if (vectors[0].length !== this.args.numDimensions) {\n            throw new Error(`Vectors must have the same length as the number of dimensions (${this.args.numDimensions})`);\n        }\n        const capacity = this.index.getMaxElements();\n        const needed = this.index.getCurrentCount() + vectors.length;\n        if (needed > capacity) {\n            this.index.resizeIndex(needed);\n        }\n        const docstoreSize = this.index.getCurrentCount();\n        const toSave = {};\n        for (let i = 0; i < vectors.length; i += 1) {\n            this.index.addPoint(vectors[i], docstoreSize + i);\n            toSave[docstoreSize + i] = documents[i];\n        }\n        this.docstore.add(toSave);\n    }\n    /**\n     * Method to perform a similarity search in the vector store using a query\n     * vector. It returns the k most similar documents along with their\n     * similarity scores. An optional filter function can be provided to\n     * filter the documents.\n     * @param query The query vector.\n     * @param k The number of most similar documents to return.\n     * @param filter An optional filter function to filter the documents.\n     * @returns A Promise that resolves to an array of tuples, where each tuple contains a document and its similarity score.\n     */\n    async similaritySearchVectorWithScore(query, k, filter) {\n        if (this.args.numDimensions && !this._index) {\n            await this.initIndex([[]]);\n        }\n        if (query.length !== this.args.numDimensions) {\n            throw new Error(`Query vector must have the same length as the number of dimensions (${this.args.numDimensions})`);\n        }\n        if (k > this.index.getCurrentCount()) {\n            const total = this.index.getCurrentCount();\n            console.warn(`k (${k}) is greater than the number of elements in the index (${total}), setting k to ${total}`);\n            // eslint-disable-next-line no-param-reassign\n            k = total;\n        }\n        const filterFunction = (label) => {\n            if (!filter) {\n                return true;\n            }\n            const document = this.docstore.search(String(label));\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (typeof document !== \"string\") {\n                return filter(document);\n            }\n            return false;\n        };\n        const result = this.index.searchKnn(query, k, filter ? filterFunction : undefined);\n        return result.neighbors.map((docIndex, resultIndex) => [\n            this.docstore.search(String(docIndex)),\n            result.distances[resultIndex],\n        ]);\n    }\n    /**\n     * Method to delete the vector store from a directory. It deletes the\n     * hnswlib.index file, the docstore.json file, and the args.json file from\n     * the directory.\n     * @param params An object with a directory property that specifies the directory from which to delete the vector store.\n     * @returns A Promise that resolves when the vector store has been deleted.\n     */\n    async delete(params) {\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs/promises */ \"node:fs/promises\", 19));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 19));\n        try {\n            await fs.access(path.join(params.directory, \"hnswlib.index\"));\n        }\n        catch (err) {\n            throw new Error(`Directory ${params.directory} does not contain a hnswlib.index file.`);\n        }\n        await Promise.all([\n            await fs.rm(path.join(params.directory, \"hnswlib.index\"), {\n                force: true,\n            }),\n            await fs.rm(path.join(params.directory, \"docstore.json\"), {\n                force: true,\n            }),\n            await fs.rm(path.join(params.directory, \"args.json\"), { force: true }),\n        ]);\n    }\n    /**\n     * Method to save the vector store to a directory. It saves the HNSW\n     * index, the arguments, and the document store to the directory.\n     * @param directory The directory to which to save the vector store.\n     * @returns A Promise that resolves when the vector store has been saved.\n     */\n    async save(directory) {\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs/promises */ \"node:fs/promises\", 19));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 19));\n        await fs.mkdir(directory, { recursive: true });\n        await Promise.all([\n            this.index.writeIndex(path.join(directory, \"hnswlib.index\")),\n            await fs.writeFile(path.join(directory, \"args.json\"), JSON.stringify(this.args)),\n            await fs.writeFile(path.join(directory, \"docstore.json\"), JSON.stringify(Array.from(this.docstore._docs.entries()))),\n        ]);\n    }\n    /**\n     * Static method to load a vector store from a directory. It reads the\n     * HNSW index, the arguments, and the document store from the directory,\n     * then creates a new HNSWLib instance with these values.\n     * @param directory The directory from which to load the vector store.\n     * @param embeddings The embeddings to be used by the HNSWLib instance.\n     * @returns A Promise that resolves to a new HNSWLib instance.\n     */\n    static async load(directory, embeddings) {\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs/promises */ \"node:fs/promises\", 19));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 19));\n        const args = JSON.parse(await fs.readFile(path.join(directory, \"args.json\"), \"utf8\"));\n        const index = await HNSWLib.getHierarchicalNSW(args);\n        const [docstoreFiles] = await Promise.all([\n            fs\n                .readFile(path.join(directory, \"docstore.json\"), \"utf8\")\n                .then(JSON.parse),\n            index.readIndex(path.join(directory, \"hnswlib.index\")),\n        ]);\n        args.docstore = new _stores_doc_in_memory_js__WEBPACK_IMPORTED_MODULE_2__.SynchronousInMemoryDocstore(new Map(docstoreFiles));\n        args.index = index;\n        return new HNSWLib(embeddings, args);\n    }\n    /**\n     * Static method to create a new HNSWLib instance from texts and metadata.\n     * It creates a new Document instance for each text and metadata, then\n     * calls the fromDocuments method to create the HNSWLib instance.\n     * @param texts The texts to be used to create the documents.\n     * @param metadatas The metadata to be used to create the documents.\n     * @param embeddings The embeddings to be used by the HNSWLib instance.\n     * @param dbConfig An optional configuration object for the document store.\n     * @returns A Promise that resolves to a new HNSWLib instance.\n     */\n    static async fromTexts(texts, metadatas, embeddings, dbConfig) {\n        const docs = [];\n        for (let i = 0; i < texts.length; i += 1) {\n            const metadata = Array.isArray(metadatas) ? metadatas[i] : metadatas;\n            const newDoc = new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__.Document({\n                pageContent: texts[i],\n                metadata,\n            });\n            docs.push(newDoc);\n        }\n        return HNSWLib.fromDocuments(docs, embeddings, dbConfig);\n    }\n    /**\n     * Static method to create a new HNSWLib instance from documents. It\n     * creates a new HNSWLib instance, adds the documents to it, then returns\n     * the instance.\n     * @param docs The documents to be added to the HNSWLib instance.\n     * @param embeddings The embeddings to be used by the HNSWLib instance.\n     * @param dbConfig An optional configuration object for the document store.\n     * @returns A Promise that resolves to a new HNSWLib instance.\n     */\n    static async fromDocuments(docs, embeddings, dbConfig) {\n        const args = {\n            docstore: dbConfig?.docstore,\n            space: \"cosine\",\n        };\n        const instance = new this(embeddings, args);\n        await instance.addDocuments(docs);\n        return instance;\n    }\n    static async imports() {\n        try {\n            const { default: { HierarchicalNSW }, } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! hnswlib-node */ \"hnswlib-node\", 19));\n            return { HierarchicalNSW };\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        }\n        catch (err) {\n            throw new Error(`Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. \\`npm install -S hnswlib-node\\`.\\n\\nError: ${err?.message}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitjb21tdW5pdHlAMC4yLjI3X0Bhd3MtY3J5cHRvK3NoYTI1Ni1qc0A1LjIuMF9AYXdzLXNkaytjbGllbnQtczNAMy42MzEuMF9AYXdzLXNkaytjX3R1cGUycTRuNG50M3pncW50bGo0NWNyaGxxL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvbW11bml0eS9kaXN0L3ZlY3RvcnN0b3Jlcy9obnN3bGliLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUU7QUFDZDtBQUNvQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxzQkFBc0IsNkVBQW1CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsaUZBQTJCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxhQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQkFBa0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsd0JBQXdCO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0JBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsd0JBQXdCO0FBQzNIO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixFQUFFLHlEQUF5RCxNQUFNLGtCQUFrQixNQUFNO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNJQUEwQjtBQUNuRCwyQkFBMkIsd0hBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGtCQUFrQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLG9FQUFvRSxhQUFhO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzSUFBMEI7QUFDbkQsMkJBQTJCLHdIQUFtQjtBQUM5QyxvQ0FBb0MsaUJBQWlCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzSUFBMEI7QUFDbkQsMkJBQTJCLHdIQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlGQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0EsK0JBQStCLCtEQUFRO0FBQ3ZDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVcsaUJBQWlCLElBQUksUUFBUSw4SEFBc0I7QUFDbEYscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGdLQUFnSyxhQUFhO0FBQzdLO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXJibGlzbS9uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitjb21tdW5pdHlAMC4yLjI3X0Bhd3MtY3J5cHRvK3NoYTI1Ni1qc0A1LjIuMF9AYXdzLXNkaytjbGllbnQtczNAMy42MzEuMF9AYXdzLXNkaytjX3R1cGUycTRuNG50M3pncW50bGo0NWNyaGxxL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvbW11bml0eS9kaXN0L3ZlY3RvcnN0b3Jlcy9obnN3bGliLmpzPzBmMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2F2ZWFibGVWZWN0b3JTdG9yZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdmVjdG9yc3RvcmVzXCI7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzXCI7XG5pbXBvcnQgeyBTeW5jaHJvbm91c0luTWVtb3J5RG9jc3RvcmUgfSBmcm9tIFwiLi4vc3RvcmVzL2RvYy9pbl9tZW1vcnkuanNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBpbXBsZW1lbnRzIGEgdmVjdG9yIHN0b3JlIHVzaW5nIEhpZXJhcmNoaWNhbCBOYXZpZ2FibGUgU21hbGxcbiAqIFdvcmxkIChITlNXKSBncmFwaHMuIEl0IGV4dGVuZHMgdGhlIFNhdmVhYmxlVmVjdG9yU3RvcmUgY2xhc3MgYW5kXG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgZG9jdW1lbnRzIGFuZCB2ZWN0b3JzLCBwZXJmb3JtaW5nXG4gKiBzaW1pbGFyaXR5IHNlYXJjaGVzLCBhbmQgc2F2aW5nIGFuZCBsb2FkaW5nIHRoZSB2ZWN0b3Igc3RvcmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBITlNXTGliIGV4dGVuZHMgU2F2ZWFibGVWZWN0b3JTdG9yZSB7XG4gICAgX3ZlY3RvcnN0b3JlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaG5zd2xpYlwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihlbWJlZGRpbmdzLCBhcmdzKSB7XG4gICAgICAgIHN1cGVyKGVtYmVkZGluZ3MsIGFyZ3MpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfaW5kZXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZG9jc3RvcmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGFyZ3MuaW5kZXg7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuZW1iZWRkaW5ncyA9IGVtYmVkZGluZ3M7XG4gICAgICAgIHRoaXMuZG9jc3RvcmUgPSBhcmdzPy5kb2NzdG9yZSA/PyBuZXcgU3luY2hyb25vdXNJbk1lbW9yeURvY3N0b3JlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBhZGQgZG9jdW1lbnRzIHRvIHRoZSB2ZWN0b3Igc3RvcmUuIEl0IGZpcnN0IGNvbnZlcnRzIHRoZVxuICAgICAqIGRvY3VtZW50cyB0byB2ZWN0b3JzIHVzaW5nIHRoZSBlbWJlZGRpbmdzLCB0aGVuIGFkZHMgdGhlIHZlY3RvcnMgdG8gdGhlXG4gICAgICogdmVjdG9yIHN0b3JlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudHMgVGhlIGRvY3VtZW50cyB0byBiZSBhZGRlZCB0byB0aGUgdmVjdG9yIHN0b3JlLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWRkRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICBjb25zdCB0ZXh0cyA9IGRvY3VtZW50cy5tYXAoKHsgcGFnZUNvbnRlbnQgfSkgPT4gcGFnZUNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRWZWN0b3JzKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZERvY3VtZW50cyh0ZXh0cyksIGRvY3VtZW50cyk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRIaWVyYXJjaGljYWxOU1coYXJncykge1xuICAgICAgICBjb25zdCB7IEhpZXJhcmNoaWNhbE5TVyB9ID0gYXdhaXQgSE5TV0xpYi5pbXBvcnRzKCk7XG4gICAgICAgIGlmICghYXJncy5zcGFjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaG5zd2xpYi1ub2RlIHJlcXVpcmVzIGEgc3BhY2UgYXJndW1lbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyZ3MubnVtRGltZW5zaW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJobnN3bGliLW5vZGUgcmVxdWlyZXMgYSBudW1EaW1lbnNpb25zIGFyZ3VtZW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGllcmFyY2hpY2FsTlNXKGFyZ3Muc3BhY2UsIGFyZ3MubnVtRGltZW5zaW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIGluaXRJbmRleCh2ZWN0b3JzKSB7XG4gICAgICAgIGlmICghdGhpcy5faW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ3MubnVtRGltZW5zaW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmdzLm51bURpbWVuc2lvbnMgPSB2ZWN0b3JzWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSBhd2FpdCBITlNXTGliLmdldEhpZXJhcmNoaWNhbE5TVyh0aGlzLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pbmRleC5nZXRDdXJyZW50Q291bnQoKSkge1xuICAgICAgICAgICAgdGhpcy5pbmRleC5pbml0SW5kZXgodmVjdG9ycy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpbmRleCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbmRleCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVjdG9yIHN0b3JlIG5vdCBpbml0aWFsaXNlZCB5ZXQuIFRyeSBjYWxsaW5nIGBhZGRUZXh0c2AgZmlyc3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcbiAgICB9XG4gICAgc2V0IGluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBhZGQgdmVjdG9ycyB0byB0aGUgdmVjdG9yIHN0b3JlLiBJdCBmaXJzdCBpbml0aWFsaXplcyB0aGVcbiAgICAgKiBpbmRleCBpZiBpdCBoYXNuJ3QgYmVlbiBpbml0aWFsaXplZCB5ZXQsIHRoZW4gYWRkcyB0aGUgdmVjdG9ycyB0byB0aGVcbiAgICAgKiBpbmRleCBhbmQgdGhlIGRvY3VtZW50cyB0byB0aGUgZG9jdW1lbnQgc3RvcmUuXG4gICAgICogQHBhcmFtIHZlY3RvcnMgVGhlIHZlY3RvcnMgdG8gYmUgYWRkZWQgdG8gdGhlIHZlY3RvciBzdG9yZS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRzIFRoZSBkb2N1bWVudHMgY29ycmVzcG9uZGluZyB0byB0aGUgdmVjdG9ycy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB2ZWN0b3JzIGFuZCBkb2N1bWVudHMgaGF2ZSBiZWVuIGFkZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZFZlY3RvcnModmVjdG9ycywgZG9jdW1lbnRzKSB7XG4gICAgICAgIGlmICh2ZWN0b3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdEluZGV4KHZlY3RvcnMpO1xuICAgICAgICAvLyBUT0RPIGhlcmUgd2UgY291bGQgb3B0aW9uYWxseSBub3JtYWxpc2UgdGhlIHZlY3RvcnMgdG8gdW5pdCBsZW5ndGhcbiAgICAgICAgLy8gc28gdGhhdCBkb3QgcHJvZHVjdCBpcyBlcXVpdmFsZW50IHRvIGNvc2luZSBzaW1pbGFyaXR5LCBsaWtlIHRoaXNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25tc2xpYi9obnN3bGliL2lzc3Vlcy8zODQjaXNzdWVjb21tZW50LTExNTU3Mzc3MzBcbiAgICAgICAgLy8gV2hpbGUgd2Ugb25seSBzdXBwb3J0IE9wZW5BSSBlbWJlZGRpbmdzIHRoaXMgaXNuJ3QgbmVjZXNzYXJ5XG4gICAgICAgIGlmICh2ZWN0b3JzLmxlbmd0aCAhPT0gZG9jdW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWZWN0b3JzIGFuZCBtZXRhZGF0YXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2ZWN0b3JzWzBdLmxlbmd0aCAhPT0gdGhpcy5hcmdzLm51bURpbWVuc2lvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVmVjdG9ycyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBudW1iZXIgb2YgZGltZW5zaW9ucyAoJHt0aGlzLmFyZ3MubnVtRGltZW5zaW9uc30pYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLmluZGV4LmdldE1heEVsZW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IG5lZWRlZCA9IHRoaXMuaW5kZXguZ2V0Q3VycmVudENvdW50KCkgKyB2ZWN0b3JzLmxlbmd0aDtcbiAgICAgICAgaWYgKG5lZWRlZCA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4LnJlc2l6ZUluZGV4KG5lZWRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZG9jc3RvcmVTaXplID0gdGhpcy5pbmRleC5nZXRDdXJyZW50Q291bnQoKTtcbiAgICAgICAgY29uc3QgdG9TYXZlID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjdG9ycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgdGhpcy5pbmRleC5hZGRQb2ludCh2ZWN0b3JzW2ldLCBkb2NzdG9yZVNpemUgKyBpKTtcbiAgICAgICAgICAgIHRvU2F2ZVtkb2NzdG9yZVNpemUgKyBpXSA9IGRvY3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvY3N0b3JlLmFkZCh0b1NhdmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gcGVyZm9ybSBhIHNpbWlsYXJpdHkgc2VhcmNoIGluIHRoZSB2ZWN0b3Igc3RvcmUgdXNpbmcgYSBxdWVyeVxuICAgICAqIHZlY3Rvci4gSXQgcmV0dXJucyB0aGUgayBtb3N0IHNpbWlsYXIgZG9jdW1lbnRzIGFsb25nIHdpdGggdGhlaXJcbiAgICAgKiBzaW1pbGFyaXR5IHNjb3Jlcy4gQW4gb3B0aW9uYWwgZmlsdGVyIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZCB0b1xuICAgICAqIGZpbHRlciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdmVjdG9yLlxuICAgICAqIEBwYXJhbSBrIFRoZSBudW1iZXIgb2YgbW9zdCBzaW1pbGFyIGRvY3VtZW50cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIGZpbHRlciBBbiBvcHRpb25hbCBmaWx0ZXIgZnVuY3Rpb24gdG8gZmlsdGVyIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgdHVwbGVzLCB3aGVyZSBlYWNoIHR1cGxlIGNvbnRhaW5zIGEgZG9jdW1lbnQgYW5kIGl0cyBzaW1pbGFyaXR5IHNjb3JlLlxuICAgICAqL1xuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2hWZWN0b3JXaXRoU2NvcmUocXVlcnksIGssIGZpbHRlcikge1xuICAgICAgICBpZiAodGhpcy5hcmdzLm51bURpbWVuc2lvbnMgJiYgIXRoaXMuX2luZGV4KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRJbmRleChbW11dKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnkubGVuZ3RoICE9PSB0aGlzLmFyZ3MubnVtRGltZW5zaW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBRdWVyeSB2ZWN0b3IgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCBhcyB0aGUgbnVtYmVyIG9mIGRpbWVuc2lvbnMgKCR7dGhpcy5hcmdzLm51bURpbWVuc2lvbnN9KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID4gdGhpcy5pbmRleC5nZXRDdXJyZW50Q291bnQoKSkge1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmluZGV4LmdldEN1cnJlbnRDb3VudCgpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBrICgke2t9KSBpcyBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgaW5kZXggKCR7dG90YWx9KSwgc2V0dGluZyBrIHRvICR7dG90YWx9YCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGsgPSB0b3RhbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJGdW5jdGlvbiA9IChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gdGhpcy5kb2NzdG9yZS5zZWFyY2goU3RyaW5nKGxhYmVsKSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcihkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuaW5kZXguc2VhcmNoS25uKHF1ZXJ5LCBrLCBmaWx0ZXIgPyBmaWx0ZXJGdW5jdGlvbiA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiByZXN1bHQubmVpZ2hib3JzLm1hcCgoZG9jSW5kZXgsIHJlc3VsdEluZGV4KSA9PiBbXG4gICAgICAgICAgICB0aGlzLmRvY3N0b3JlLnNlYXJjaChTdHJpbmcoZG9jSW5kZXgpKSxcbiAgICAgICAgICAgIHJlc3VsdC5kaXN0YW5jZXNbcmVzdWx0SW5kZXhdLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGRlbGV0ZSB0aGUgdmVjdG9yIHN0b3JlIGZyb20gYSBkaXJlY3RvcnkuIEl0IGRlbGV0ZXMgdGhlXG4gICAgICogaG5zd2xpYi5pbmRleCBmaWxlLCB0aGUgZG9jc3RvcmUuanNvbiBmaWxlLCBhbmQgdGhlIGFyZ3MuanNvbiBmaWxlIGZyb21cbiAgICAgKiB0aGUgZGlyZWN0b3J5LlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IHdpdGggYSBkaXJlY3RvcnkgcHJvcGVydHkgdGhhdCBzcGVjaWZpZXMgdGhlIGRpcmVjdG9yeSBmcm9tIHdoaWNoIHRvIGRlbGV0ZSB0aGUgdmVjdG9yIHN0b3JlLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHZlY3RvciBzdG9yZSBoYXMgYmVlbiBkZWxldGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZShwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnQoXCJub2RlOmZzL3Byb21pc2VzXCIpO1xuICAgICAgICBjb25zdCBwYXRoID0gYXdhaXQgaW1wb3J0KFwibm9kZTpwYXRoXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZnMuYWNjZXNzKHBhdGguam9pbihwYXJhbXMuZGlyZWN0b3J5LCBcImhuc3dsaWIuaW5kZXhcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGlyZWN0b3J5ICR7cGFyYW1zLmRpcmVjdG9yeX0gZG9lcyBub3QgY29udGFpbiBhIGhuc3dsaWIuaW5kZXggZmlsZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBhd2FpdCBmcy5ybShwYXRoLmpvaW4ocGFyYW1zLmRpcmVjdG9yeSwgXCJobnN3bGliLmluZGV4XCIpLCB7XG4gICAgICAgICAgICAgICAgZm9yY2U6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGF3YWl0IGZzLnJtKHBhdGguam9pbihwYXJhbXMuZGlyZWN0b3J5LCBcImRvY3N0b3JlLmpzb25cIiksIHtcbiAgICAgICAgICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYXdhaXQgZnMucm0ocGF0aC5qb2luKHBhcmFtcy5kaXJlY3RvcnksIFwiYXJncy5qc29uXCIpLCB7IGZvcmNlOiB0cnVlIH0pLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIHNhdmUgdGhlIHZlY3RvciBzdG9yZSB0byBhIGRpcmVjdG9yeS4gSXQgc2F2ZXMgdGhlIEhOU1dcbiAgICAgKiBpbmRleCwgdGhlIGFyZ3VtZW50cywgYW5kIHRoZSBkb2N1bWVudCBzdG9yZSB0byB0aGUgZGlyZWN0b3J5LlxuICAgICAqIEBwYXJhbSBkaXJlY3RvcnkgVGhlIGRpcmVjdG9yeSB0byB3aGljaCB0byBzYXZlIHRoZSB2ZWN0b3Igc3RvcmUuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgdmVjdG9yIHN0b3JlIGhhcyBiZWVuIHNhdmVkLlxuICAgICAqL1xuICAgIGFzeW5jIHNhdmUoZGlyZWN0b3J5KSB7XG4gICAgICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0KFwibm9kZTpmcy9wcm9taXNlc1wiKTtcbiAgICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IGltcG9ydChcIm5vZGU6cGF0aFwiKTtcbiAgICAgICAgYXdhaXQgZnMubWtkaXIoZGlyZWN0b3J5LCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5pbmRleC53cml0ZUluZGV4KHBhdGguam9pbihkaXJlY3RvcnksIFwiaG5zd2xpYi5pbmRleFwiKSksXG4gICAgICAgICAgICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGRpcmVjdG9yeSwgXCJhcmdzLmpzb25cIiksIEpTT04uc3RyaW5naWZ5KHRoaXMuYXJncykpLFxuICAgICAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihkaXJlY3RvcnksIFwiZG9jc3RvcmUuanNvblwiKSwgSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGlzLmRvY3N0b3JlLl9kb2NzLmVudHJpZXMoKSkpKSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gbG9hZCBhIHZlY3RvciBzdG9yZSBmcm9tIGEgZGlyZWN0b3J5LiBJdCByZWFkcyB0aGVcbiAgICAgKiBITlNXIGluZGV4LCB0aGUgYXJndW1lbnRzLCBhbmQgdGhlIGRvY3VtZW50IHN0b3JlIGZyb20gdGhlIGRpcmVjdG9yeSxcbiAgICAgKiB0aGVuIGNyZWF0ZXMgYSBuZXcgSE5TV0xpYiBpbnN0YW5jZSB3aXRoIHRoZXNlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gZGlyZWN0b3J5IFRoZSBkaXJlY3RvcnkgZnJvbSB3aGljaCB0byBsb2FkIHRoZSB2ZWN0b3Igc3RvcmUuXG4gICAgICogQHBhcmFtIGVtYmVkZGluZ3MgVGhlIGVtYmVkZGluZ3MgdG8gYmUgdXNlZCBieSB0aGUgSE5TV0xpYiBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBITlNXTGliIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBsb2FkKGRpcmVjdG9yeSwgZW1iZWRkaW5ncykge1xuICAgICAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydChcIm5vZGU6ZnMvcHJvbWlzZXNcIik7XG4gICAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoXCJub2RlOnBhdGhcIik7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBKU09OLnBhcnNlKGF3YWl0IGZzLnJlYWRGaWxlKHBhdGguam9pbihkaXJlY3RvcnksIFwiYXJncy5qc29uXCIpLCBcInV0ZjhcIikpO1xuICAgICAgICBjb25zdCBpbmRleCA9IGF3YWl0IEhOU1dMaWIuZ2V0SGllcmFyY2hpY2FsTlNXKGFyZ3MpO1xuICAgICAgICBjb25zdCBbZG9jc3RvcmVGaWxlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBmc1xuICAgICAgICAgICAgICAgIC5yZWFkRmlsZShwYXRoLmpvaW4oZGlyZWN0b3J5LCBcImRvY3N0b3JlLmpzb25cIiksIFwidXRmOFwiKVxuICAgICAgICAgICAgICAgIC50aGVuKEpTT04ucGFyc2UpLFxuICAgICAgICAgICAgaW5kZXgucmVhZEluZGV4KHBhdGguam9pbihkaXJlY3RvcnksIFwiaG5zd2xpYi5pbmRleFwiKSksXG4gICAgICAgIF0pO1xuICAgICAgICBhcmdzLmRvY3N0b3JlID0gbmV3IFN5bmNocm9ub3VzSW5NZW1vcnlEb2NzdG9yZShuZXcgTWFwKGRvY3N0b3JlRmlsZXMpKTtcbiAgICAgICAgYXJncy5pbmRleCA9IGluZGV4O1xuICAgICAgICByZXR1cm4gbmV3IEhOU1dMaWIoZW1iZWRkaW5ncywgYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IEhOU1dMaWIgaW5zdGFuY2UgZnJvbSB0ZXh0cyBhbmQgbWV0YWRhdGEuXG4gICAgICogSXQgY3JlYXRlcyBhIG5ldyBEb2N1bWVudCBpbnN0YW5jZSBmb3IgZWFjaCB0ZXh0IGFuZCBtZXRhZGF0YSwgdGhlblxuICAgICAqIGNhbGxzIHRoZSBmcm9tRG9jdW1lbnRzIG1ldGhvZCB0byBjcmVhdGUgdGhlIEhOU1dMaWIgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHRleHRzIFRoZSB0ZXh0cyB0byBiZSB1c2VkIHRvIGNyZWF0ZSB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBtZXRhZGF0YXMgVGhlIG1ldGFkYXRhIHRvIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIGVtYmVkZGluZ3MgVGhlIGVtYmVkZGluZ3MgdG8gYmUgdXNlZCBieSB0aGUgSE5TV0xpYiBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gZGJDb25maWcgQW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSBkb2N1bWVudCBzdG9yZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBITlNXTGliIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tVGV4dHModGV4dHMsIG1ldGFkYXRhcywgZW1iZWRkaW5ncywgZGJDb25maWcpIHtcbiAgICAgICAgY29uc3QgZG9jcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IEFycmF5LmlzQXJyYXkobWV0YWRhdGFzKSA/IG1ldGFkYXRhc1tpXSA6IG1ldGFkYXRhcztcbiAgICAgICAgICAgIGNvbnN0IG5ld0RvYyA9IG5ldyBEb2N1bWVudCh7XG4gICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQ6IHRleHRzW2ldLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2NzLnB1c2gobmV3RG9jKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSE5TV0xpYi5mcm9tRG9jdW1lbnRzKGRvY3MsIGVtYmVkZGluZ3MsIGRiQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgSE5TV0xpYiBpbnN0YW5jZSBmcm9tIGRvY3VtZW50cy4gSXRcbiAgICAgKiBjcmVhdGVzIGEgbmV3IEhOU1dMaWIgaW5zdGFuY2UsIGFkZHMgdGhlIGRvY3VtZW50cyB0byBpdCwgdGhlbiByZXR1cm5zXG4gICAgICogdGhlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBkb2NzIFRoZSBkb2N1bWVudHMgdG8gYmUgYWRkZWQgdG8gdGhlIEhOU1dMaWIgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIGVtYmVkZGluZ3MgVGhlIGVtYmVkZGluZ3MgdG8gYmUgdXNlZCBieSB0aGUgSE5TV0xpYiBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gZGJDb25maWcgQW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSBkb2N1bWVudCBzdG9yZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBITlNXTGliIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tRG9jdW1lbnRzKGRvY3MsIGVtYmVkZGluZ3MsIGRiQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICAgICAgICBkb2NzdG9yZTogZGJDb25maWc/LmRvY3N0b3JlLFxuICAgICAgICAgICAgc3BhY2U6IFwiY29zaW5lXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IHRoaXMoZW1iZWRkaW5ncywgYXJncyk7XG4gICAgICAgIGF3YWl0IGluc3RhbmNlLmFkZERvY3VtZW50cyhkb2NzKTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgaW1wb3J0cygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGVmYXVsdDogeyBIaWVyYXJjaGljYWxOU1cgfSwgfSA9IGF3YWl0IGltcG9ydChcImhuc3dsaWItbm9kZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IEhpZXJhcmNoaWNhbE5TVyB9O1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBpbXBvcnQgaG5zd2xpYi1ub2RlLiBQbGVhc2UgaW5zdGFsbCBobnN3bGliLW5vZGUgYXMgYSBkZXBlbmRlbmN5IHdpdGgsIGUuZy4gXFxgbnBtIGluc3RhbGwgLVMgaG5zd2xpYi1ub2RlXFxgLlxcblxcbkVycm9yOiAke2Vycj8ubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/vectorstores/hnswlib.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/vectorstores/hnswlib.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/vectorstores/hnswlib.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HNSWLib: () => (/* reexport safe */ _dist_vectorstores_hnswlib_js__WEBPACK_IMPORTED_MODULE_0__.HNSWLib)
/* harmony export */ });
/* harmony import */ var _dist_vectorstores_hnswlib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/vectorstores/hnswlib.js */ "(rsc)/./node_modules/.pnpm/@langchain+community@0.2.27_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.631.0_@aws-sdk+c_tupe2q4n4nt3zgqntlj45crhlq/node_modules/@langchain/community/dist/vectorstores/hnswlib.js");


/***/ })

};
;